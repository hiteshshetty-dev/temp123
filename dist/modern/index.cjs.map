{"version":3,"sources":["../../src/index.ts"],"sourcesContent":["import ContentstackLivePreviewHOC from \"./preview/contentstack-live-preview-HOC\";\nimport { IStackSdk as ExternalStackSdkType } from \"./types/types\";\n\nimport {\n    OnEntryChangeCallback,\n    OnEntryChangeCallbackUID,\n    OnEntryChangeConfig,\n} from \"./livePreview/types/onEntryChangeCallback.type\";\n\nexport type IStackSdk = ExternalStackSdkType;\n\nclass LightLivePreviewHoC {\n    private static previewConstructors = {};\n    private static onEntryChangeCallbacks = {};\n\n    static init() {\n        if (typeof window === \"undefined\") {\n            return Promise.resolve(LightLivePreviewHoC.previewConstructors);\n        }\n\n        return LightLivePreviewHoC.initializePreview();\n    }\n\n    private static initializePreview() {\n        LightLivePreviewHoC.previewConstructors = {\n            livePreview: {},\n            visualBuilder: {},\n        };\n\n        LightLivePreviewHoC.onEntryChangeCallbacks = {};\n\n        return Promise.resolve(LightLivePreviewHoC.previewConstructors);\n    }\n\n    static get hash() {\n        return \"\";\n    }\n\n    static get config() {\n        return {};\n    }\n\n    static isInitialized() {\n        return false;\n    }\n\n    static onEntryChange(\n        callback: OnEntryChangeCallback,\n        config: OnEntryChangeConfig = {}\n    ): OnEntryChangeCallbackUID {\n        const { skipInitialRender = false } = config;\n\n        if (!skipInitialRender) {\n            callback();\n        }\n\n        return \"live-preview-id\";\n    }\n\n    static onLiveEdit(callback: OnEntryChangeCallback) {\n        return \"live-preview-id\";\n    }\n\n    static unsubscribeOnEntryChange() {\n        // intentionally empty\n    }\n\n    static getSdkVersion(): string {\n        return process?.env?.PACKAGE_VERSION!;\n    }\n}\n\nconst ContentstackLivePreview =\n    typeof process !== \"undefined\" &&\n    (process?.env?.PURGE_PREVIEW_SDK === \"true\" ||\n        process?.env?.REACT_APP_PURGE_PREVIEW_SDK === \"true\")\n        ? LightLivePreviewHoC\n        : ContentstackLivePreviewHOC;\n\nexport const VB_EmptyBlockParentClass = \"visual-builder__empty-block-parent\";\nexport default ContentstackLivePreview;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAAuC;AAWvC,IAAM,uBAAN,MAAM,qBAAoB;AAAA,EAItB,OAAO,OAAO;AACV,QAAI,OAAO,WAAW,aAAa;AAC/B,aAAO,QAAQ,QAAQ,qBAAoB,mBAAmB;AAAA,IAClE;AAEA,WAAO,qBAAoB,kBAAkB;AAAA,EACjD;AAAA,EAEA,OAAe,oBAAoB;AAC/B,yBAAoB,sBAAsB;AAAA,MACtC,aAAa,CAAC;AAAA,MACd,eAAe,CAAC;AAAA,IACpB;AAEA,yBAAoB,yBAAyB,CAAC;AAE9C,WAAO,QAAQ,QAAQ,qBAAoB,mBAAmB;AAAA,EAClE;AAAA,EAEA,WAAW,OAAO;AACd,WAAO;AAAA,EACX;AAAA,EAEA,WAAW,SAAS;AAChB,WAAO,CAAC;AAAA,EACZ;AAAA,EAEA,OAAO,gBAAgB;AACnB,WAAO;AAAA,EACX;AAAA,EAEA,OAAO,cACH,UACA,SAA8B,CAAC,GACP;AACxB,UAAM,EAAE,oBAAoB,MAAM,IAAI;AAEtC,QAAI,CAAC,mBAAmB;AACpB,eAAS;AAAA,IACb;AAEA,WAAO;AAAA,EACX;AAAA,EAEA,OAAO,WAAW,UAAiC;AAC/C,WAAO;AAAA,EACX;AAAA,EAEA,OAAO,2BAA2B;AAAA,EAElC;AAAA,EAEA,OAAO,gBAAwB;AAC3B,WAAO;AAAA,EACX;AACJ;AA3DM,qBACa,sBAAsB,CAAC;AADpC,qBAEa,yBAAyB,CAAC;AAF7C,IAAM,sBAAN;AA6DA,IAAM,0BACF,OAAO,YAAY,gBAClB,kCAAoC,UACjC,4CAA8C,UAC5C,sBACA,qCAAAA;AAEH,IAAM,2BAA2B;AACxC,IAAO,gBAAQ;","names":["ContentstackLivePreviewHOC"]}