{"version":3,"sources":["../../../src/utils/addLivePreviewQueryTags.ts"],"sourcesContent":["import { PublicLogger } from \"../logger/logger\";\nexport function addLivePreviewQueryTags(link: string): string {\n    try {\n        const docUrl: URL = new URL(document.location.href);\n        const newUrl: URL = new URL(link);\n        const livePreviewHash: string | null =\n            docUrl.searchParams.get(\"live_preview\");\n        const ctUid: string | null =\n            docUrl.searchParams.get(\"content_type_uid\");\n        const entryUid: string | null = docUrl.searchParams.get(\"entry_uid\");\n        const previewTimestamp: string | null = docUrl.searchParams.get(\"preview_timestamp\");\n        if (livePreviewHash) {\n            newUrl.searchParams.set(\"live_preview\", livePreviewHash);\n        }\n        if(ctUid && entryUid){\n            newUrl.searchParams.set(\"content_type_uid\", ctUid);\n            newUrl.searchParams.set(\"entry_uid\", entryUid);\n        }\n        if (previewTimestamp) {\n            newUrl.searchParams.set(\"preview_timestamp\", previewTimestamp);\n        }\n        return newUrl.href;\n    } catch (error) {\n        PublicLogger.error(\"Error while adding live preview to URL\");\n        return link;\n    }\n}"],"mappings":";;;AAAA,SAAS,oBAAoB;AACtB,SAAS,wBAAwB,MAAsB;AAC1D,MAAI;AACA,UAAM,SAAc,IAAI,IAAI,SAAS,SAAS,IAAI;AAClD,UAAM,SAAc,IAAI,IAAI,IAAI;AAChC,UAAM,kBACF,OAAO,aAAa,IAAI,cAAc;AAC1C,UAAM,QACF,OAAO,aAAa,IAAI,kBAAkB;AAC9C,UAAM,WAA0B,OAAO,aAAa,IAAI,WAAW;AACnE,UAAM,mBAAkC,OAAO,aAAa,IAAI,mBAAmB;AACnF,QAAI,iBAAiB;AACjB,aAAO,aAAa,IAAI,gBAAgB,eAAe;AAAA,IAC3D;AACA,QAAG,SAAS,UAAS;AACjB,aAAO,aAAa,IAAI,oBAAoB,KAAK;AACjD,aAAO,aAAa,IAAI,aAAa,QAAQ;AAAA,IACjD;AACA,QAAI,kBAAkB;AAClB,aAAO,aAAa,IAAI,qBAAqB,gBAAgB;AAAA,IACjE;AACA,WAAO,OAAO;AAAA,EAClB,SAAS,OAAO;AACZ,iBAAa,MAAM,wCAAwC;AAC3D,WAAO;AAAA,EACX;AACJ;","names":[]}