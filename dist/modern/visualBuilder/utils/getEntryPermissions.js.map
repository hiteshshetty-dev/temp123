{"version":3,"sources":["../../../../src/visualBuilder/utils/getEntryPermissions.ts"],"sourcesContent":["import visualBuilderPostMessage from \"./visualBuilderPostMessage\";\n\nexport interface EntryPermissions {\n    create: boolean;\n    read: boolean;\n    update: boolean;\n    delete: boolean;\n    publish: boolean;\n}\n\nexport async function getEntryPermissions({\n    entryUid,\n    contentTypeUid,\n    locale,\n}: {\n    entryUid: string;\n    contentTypeUid: string;\n    locale: string;\n}) {\n    try {\n        const permissions =\n            await visualBuilderPostMessage?.send<EntryPermissions>(\n                \"get-permissions\",\n                {\n                    type: \"entry\",\n                    entryUid,\n                    contentTypeUid,\n                    locale,\n                }\n            );\n        if (permissions) {\n            return permissions;\n        }\n    } catch (error) {\n        console.debug(\"[Visual Builder] Error fetching permissions\", error);\n    }\n    // allow editing when things go wrong,\n    // e.g. when no permissions are received\n    return {\n        create: true,\n        read: true,\n        update: true,\n        delete: true,\n        publish: true,\n    };\n}\n"],"mappings":";;;AAAA,OAAO,8BAA8B;AAUrC,eAAsB,oBAAoB;AAAA,EACtC;AAAA,EACA;AAAA,EACA;AACJ,GAIG;AACC,MAAI;AACA,UAAM,cACF,MAAM,0BAA0B;AAAA,MAC5B;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,MACJ;AAAA,IACJ;AACJ,QAAI,aAAa;AACb,aAAO;AAAA,IACX;AAAA,EACJ,SAAS,OAAO;AACZ,YAAQ,MAAM,+CAA+C,KAAK;AAAA,EACtE;AAGA,SAAO;AAAA,IACH,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,SAAS;AAAA,EACb;AACJ;","names":[]}