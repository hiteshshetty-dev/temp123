{"version":3,"sources":["../../../../src/visualBuilder/utils/getWorkflowStageDetails.ts"],"sourcesContent":["import { VisualBuilderPostMessageEvents } from \"./types/postMessage.types\";\nimport visualBuilderPostMessage from \"./visualBuilderPostMessage\";\n\nexport async function getWorkflowStageDetails({\n    entryUid,\n    contentTypeUid,\n    locale,\n    variantUid,\n}: {\n    entryUid: string;\n    contentTypeUid: string;\n    locale: string;\n    variantUid?: string | undefined;\n}): Promise<WorkflowStageDetails> {\n    try {\n        const result =\n            await visualBuilderPostMessage?.send<WorkflowStageDetails>(\n                VisualBuilderPostMessageEvents.GET_WORKFLOW_STAGE_DETAILS,\n                {\n                    entryUid,\n                    contentTypeUid,\n                    locale,\n                    variantUid,\n                }\n            );\n        if (result) {\n            return result;\n        }\n    } catch (e) {\n        console.debug(\n            \"[Visual Builder] Error fetching workflow stage details\",\n            e\n        );\n    }\n    // allow editing when things go wrong,\n    return {\n        stage: {\n            name: \"Unknown\",\n        },\n        permissions: {\n            entry: {\n                update: true,\n            },\n        },\n    };\n}\n\nexport interface WorkflowStageDetails {\n    stage:\n        | {\n              name: string;\n          }\n        | undefined;\n    permissions: {\n        entry: {\n            update: boolean;\n        };\n    };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAA+C;AAC/C,sCAAqC;AAErC,eAAsB,wBAAwB;AAAA,EAC1C;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,GAKkC;AAC9B,MAAI;AACA,UAAM,SACF,MAAM,gCAAAA,SAA0B;AAAA,MAC5B,kDAA+B;AAAA,MAC/B;AAAA,QACI;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACJ;AAAA,IACJ;AACJ,QAAI,QAAQ;AACR,aAAO;AAAA,IACX;AAAA,EACJ,SAAS,GAAG;AACR,YAAQ;AAAA,MACJ;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AAEA,SAAO;AAAA,IACH,OAAO;AAAA,MACH,MAAM;AAAA,IACV;AAAA,IACA,aAAa;AAAA,MACT,OAAO;AAAA,QACH,QAAQ;AAAA,MACZ;AAAA,IACJ;AAAA,EACJ;AACJ;","names":["visualBuilderPostMessage"]}