{"version":3,"sources":["../../../../src/visualBuilder/utils/getResolvedVariantPermissions.ts"],"sourcesContent":["import { CslpData } from \"../../cslp/types/cslp.types\";\nimport { VisualBuilderPostMessageEvents } from \"./types/postMessage.types\";\nimport visualBuilderPostMessage from \"./visualBuilderPostMessage\";\n\nexport type FieldContext = Pick<CslpData, \"content_type_uid\" | \"entry_uid\" | \"locale\" | \"variant\" | \"fieldPathWithIndex\">;\n\nexport interface ResolvedVariantPermissions {\n  update: boolean;\n  error?: boolean;\n}\n\nexport async function getResolvedVariantPermissions(fieldContext: FieldContext) {\n  try {\n    const result = await visualBuilderPostMessage?.send<ResolvedVariantPermissions>(VisualBuilderPostMessageEvents.GET_RESOLVED_VARIANT_PERMISSIONS, fieldContext);\n    return result ?? {\n      update: true,\n      error: true,\n    };\n  }\n  catch(e) {\n    console.warn(\"Error retrieving resolved variant permissions\", e);\n    return {\n      update: true,\n      error: true,\n    };\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,yBAA+C;AAC/C,sCAAqC;AASrC,eAAsB,8BAA8B,cAA4B;AAXhF;AAYE,MAAI;AACF,UAAM,SAAS,QAAM,qCAAAA,YAAA,mBAA0B,KAAiC,kDAA+B,kCAAkC;AACjJ,WAAO,UAAU;AAAA,MACf,QAAQ;AAAA,MACR,OAAO;AAAA,IACT;AAAA,EACF,SACM,GAAG;AACP,YAAQ,KAAK,iDAAiD,CAAC;AAC/D,WAAO;AAAA,MACL,QAAQ;AAAA,MACR,OAAO;AAAA,IACT;AAAA,EACF;AACF;","names":["visualBuilderPostMessage"]}