{"version":3,"sources":["../../../../src/visualBuilder/utils/fetchEntryPermissionsAndStageDetails.ts"],"sourcesContent":["import { getEntryPermissionsCached } from \"./getEntryPermissionsCached\";\nimport { getWorkflowStageDetails } from \"./getWorkflowStageDetails\";\n\nexport async function fetchEntryPermissionsAndStageDetails({\n    entryUid,\n    contentTypeUid,\n    locale,\n    variantUid,\n}: {\n    entryUid: string;\n    contentTypeUid: string;\n    locale: string;\n    variantUid?: string | undefined;\n}) {\n    const entryAclPromise = getEntryPermissionsCached({\n        entryUid,\n        contentTypeUid,\n        locale,\n    });\n    const entryWorkflowStageDetailsPromise = getWorkflowStageDetails({\n        entryUid,\n        contentTypeUid,\n        locale,\n        variantUid,\n    });\n    const results = await Promise.allSettled([\n        entryAclPromise,\n        entryWorkflowStageDetailsPromise,\n    ]);\n    if (results[0].status === \"rejected\") {\n        console.debug(\n            \"[Visual Builder] Error retrieving entry permissions\",\n            results[0].reason\n        );\n    }\n    if (results[1].status === \"rejected\") {\n        console.debug(\n            \"[Visual Builder] Error retrieving entry stage details\",\n            results[1].reason\n        );\n    }\n    const acl =\n        results[0].status === \"fulfilled\" ? results[0].value : undefined;\n    const workflowStage =\n        results[1].status === \"fulfilled\" ? results[1].value : undefined;\n    return {\n        acl,\n        workflowStage,\n    };\n}\n"],"mappings":";;;AAAA,SAAS,iCAAiC;AAC1C,SAAS,+BAA+B;AAExC,eAAsB,qCAAqC;AAAA,EACvD;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,GAKG;AACC,QAAM,kBAAkB,0BAA0B;AAAA,IAC9C;AAAA,IACA;AAAA,IACA;AAAA,EACJ,CAAC;AACD,QAAM,mCAAmC,wBAAwB;AAAA,IAC7D;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ,CAAC;AACD,QAAM,UAAU,MAAM,QAAQ,WAAW;AAAA,IACrC;AAAA,IACA;AAAA,EACJ,CAAC;AACD,MAAI,QAAQ,CAAC,EAAE,WAAW,YAAY;AAClC,YAAQ;AAAA,MACJ;AAAA,MACA,QAAQ,CAAC,EAAE;AAAA,IACf;AAAA,EACJ;AACA,MAAI,QAAQ,CAAC,EAAE,WAAW,YAAY;AAClC,YAAQ;AAAA,MACJ;AAAA,MACA,QAAQ,CAAC,EAAE;AAAA,IACf;AAAA,EACJ;AACA,QAAM,MACF,QAAQ,CAAC,EAAE,WAAW,cAAc,QAAQ,CAAC,EAAE,QAAQ;AAC3D,QAAM,gBACF,QAAQ,CAAC,EAAE,WAAW,cAAc,QAAQ,CAAC,EAAE,QAAQ;AAC3D,SAAO;AAAA,IACH;AAAA,IACA;AAAA,EACJ;AACJ;","names":[]}